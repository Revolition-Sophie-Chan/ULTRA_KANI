// ====================================================================================================
//
// ロード処理 [road.cpp]
// Author : tanaka rikiya
//
// ====================================================================================================
#define _CRT_SECURE_NO_WARNINGS
#include "load.h"

// ====================================================================================================
// マクロ定義
// ====================================================================================================
#define	TEXTURE_LOAD		"Data/Score/number000.png"		// 読み込むテクスチャファイル名
#define LOAD_SIZE			(20)							// ロードボードの大きさ
#define LOAD_MAX			(10)							// 数値
#define LOAD_DATA			(5)								// ロード数
#define LOAD_FILE_NAME		("Data/text/rank.txt")					// セーブファイル

// ====================================================================================================
// プロトタイプ宣言
// ====================================================================================================

// ====================================================================================================
// グローバル変数
// ====================================================================================================
LOAD g_aLoad[5];											// ロード変数

// ====================================================================================================
// 初期化処理
// ====================================================================================================
void InitLoad(void)
{
	int nCntLoad;
	LPDIRECT3DDEVICE9 pDevice = GetDevice();

	for (nCntLoad = 0; nCntLoad < LOAD_DATA; nCntLoad++)
	{
		g_aLoad[nCntLoad].nPoint = 0;
	}

	LoadData();
}

// ====================================================================================================
// ロードデータ取得関数
// ====================================================================================================
LOAD *GetLoad(void)
{
	return &g_aLoad[0];
}

// ====================================================================================================
// ロード関数
// ====================================================================================================
void LoadData(void)
{
	// ファイルポイント
	FILE *pFile;

	int nCntLoad;

	// ファイルを開く
	pFile = fopen(LOAD_FILE_NAME, "r");

	//ファイルが開けたとき
	if (pFile != NULL)
	{
		for (nCntLoad = 0; nCntLoad < LOAD_DATA; nCntLoad++)
		{
			fscanf(pFile, "%d", &g_aLoad[nCntLoad].nPoint); // 名前
		}
		// ファイル閉じる
		fclose(pFile);
	}

	//ファイルが開けないとき
	else
	{
		printf("開けませんでした\n");
	}
}